# Internationalization (i18n)

OffMeta supports 11 languages via a lightweight, zero-dependency i18n system.

## Supported Languages

| Code  | Language           | Flag |
|-------|--------------------|------|
| `en`  | English            | ğŸ‡ºğŸ‡¸  |
| `es`  | EspaÃ±ol            | ğŸ‡ªğŸ‡¸  |
| `fr`  | FranÃ§ais           | ğŸ‡«ğŸ‡·  |
| `de`  | Deutsch            | ğŸ‡©ğŸ‡ª  |
| `it`  | Italiano           | ğŸ‡®ğŸ‡¹  |
| `pt`  | PortuguÃªs          | ğŸ‡§ğŸ‡·  |
| `ja`  | æ—¥æœ¬èª              | ğŸ‡¯ğŸ‡µ  |
| `ko`  | í•œêµ­ì–´              | ğŸ‡°ğŸ‡·  |
| `ru`  | Ğ ÑƒÑÑĞºĞ¸Ğ¹            | ğŸ‡·ğŸ‡º  |
| `zhs` | ç®€ä½“ä¸­æ–‡            | ğŸ‡¨ğŸ‡³  |
| `zht` | ç¹é«”ä¸­æ–‡            | ğŸ‡¹ğŸ‡¼  |

## Architecture

```
src/lib/i18n/
â”œâ”€â”€ index.tsx        # I18nProvider, useTranslation hook, locale config
â”œâ”€â”€ en.json          # English (source of truth)
â”œâ”€â”€ es.json          # Spanish
â”œâ”€â”€ fr.json          # French
â”œâ”€â”€ de.json          # German
â”œâ”€â”€ it.json          # Italian
â”œâ”€â”€ pt.json          # Portuguese
â”œâ”€â”€ ja.json          # Japanese
â”œâ”€â”€ ko.json          # Korean
â”œâ”€â”€ ru.json          # Russian
â”œâ”€â”€ zhs.json         # Simplified Chinese
â””â”€â”€ zht.json         # Traditional Chinese
```

### Key design decisions

- **No external dependency** â€” uses React context + JSON dictionaries.
- **Fallback chain** â€” missing keys fall back to English, then to the key itself.
- **Persistent locale** â€” saved to `localStorage` under `offmeta-locale`.
- **Scryfall integration** â€” locale maps to Scryfall `lang:` parameter for localized card results.

## Usage

### Provider

The `<I18nProvider>` wraps the entire app in `src/App.tsx`:

```tsx
import { I18nProvider } from '@/lib/i18n';

<I18nProvider>
  <App />
</I18nProvider>
```

### Translation hook

```tsx
import { useTranslation } from '@/lib/i18n';

function MyComponent() {
  const { t, locale, setLocale } = useTranslation();

  return <h1>{t('hero.title', 'Fallback text')}</h1>;
}
```

- `t(key, fallback?)` â€” resolve a translation string.
- `locale` â€” current `SupportedLocale` code.
- `setLocale(code)` â€” switch language and persist to storage.

### Language selector

The `<LanguageSelector />` component in the header renders a dropdown of all supported locales.

## Translation key conventions

| Pattern | Example | Description |
|---------|---------|-------------|
| `section.key` | `hero.title` | General UI strings |
| `guide.field.slug` | `guide.intro.search-by-creature-type` | Guide content |
| `guide.tipN.slug` | `guide.tip1.filter-by-color` | Guide tips (1-indexed) |
| `guide.faqNq.slug` / `guide.faqNa.slug` | `guide.faq1q.budget-price-filters` | Guide FAQ Q&A |

## Adding a new language

1. Create `src/lib/i18n/{code}.json` using `en.json` as template.
2. Add the import and dictionary entry in `src/lib/i18n/index.tsx`.
3. Add a locale entry to `SUPPORTED_LOCALES` and `LOCALE_TO_SCRYFALL_LANG`.
4. Translate all keys (guide content uses ~120 keys per language).

## Adding a new translation key

1. Add the key + English text to `en.json`.
2. Add translations for all other languages in their respective JSON files.
3. Use `t('your.key')` in the component.
4. If a language is missing the key, the English fallback is used automatically.
